<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NGM HUB â€” Expenses Engine</title>

    <!-- mismas fuentes que login/dashboard -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto:wght@300;400;500&display=swap"
      rel="stylesheet"
    >

    <link rel="stylesheet" href="assets/css/styles.css" />
    <link rel="stylesheet" href="assets/css/expenses_styles.css" />
    <link rel="stylesheet" href="assets/css/expenses_modal.css" />

    <!-- Global env/server/user pills -->
    <script src="assets/js/config.js" defer></script>
    <script src="assets/js/pills.js" defer></script>

</head>
<body class="page-expenses">
    <div class="app-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-logo">
                <img
                    src="assets/img/logo.png"
                    alt="NGM HUB Logo"
                    class="sidebar-logo-img"
                />
            </div>
            <div class="sidebar-title-block">
                <p class="sidebar-title">NGM HUB</p>
                <p class="sidebar-subtitle">Expenses Engine</p>
            </div>

            <nav class="sidebar-nav" id="sidebar-nav">
                <a href="dashboard.html" class="nav-item">Overview</a>
                <a href="expenses.html" class="nav-item nav-item-active">Expenses</a>
                <a href="projects.html" class="nav-item">Projects</a>
                <a href="pipeline.html" class="nav-item">Pipeline</a>
                <a href="team.html" class="nav-item">Team</a>
                <a href="users.html" class="nav-item">Users</a>
                <a href="#" class="nav-item">Finance</a>
                <a href="#" class="nav-item">Estimator</a>
            </nav>
        </aside>

        <!-- Main area -->
        <div class="main-area">

            <!-- Topbar (system standard) -->
            <header class="ngm-topbar">
                <div class="ngm-bar-left">
                    <div class="ngm-brand">
                        <div class="ngm-brand-icon-small"><span>âš¡</span></div>
                        <div class="ngm-brand-text">
                            <span class="ngm-brand-org">Next Generation Management</span>
                            <span class="ngm-brand-context">NGM Hub Â· Expenses Engine</span>
                        </div>
                    </div>
                </div>

                <div class="ngm-topbar-right">
                    <div class="ngm-meta">
                        <span id="env-pill" class="ngm-meta-pill ngm-meta-env">Environment Â· â€”</span>
                        <span id="server-pill" class="ngm-meta-pill ngm-meta-status ngm-meta-status-live">Server Â· â€”</span>
                    </div>

                    <form class="ngm-search" role="search" onsubmit="return false;">
                        <span class="ngm-global-search-icon">âŒ•</span>
                        <input
                            id="expenses-search-input"
                            type="search"
                            class="ngm-search-input"
                            placeholder="Search expenses..."
                            aria-label="Search expenses"
                        />
                    </form>

                    <span id="user-pill" class="user-pill">User Â· â€”</span>
                </div>
            </header>

            <main class="main-content">
                <div class="workspace">

                    <!-- Expenses Section -->
                    <section class="data-section">
                        <h2 class="section-title">Expenses</h2>

                        <!-- Toolbar -->
                        <div class="expenses-toolbar">
                            <div class="toolbar-left">
                                <div class="toolbar-field">
                                    <label class="toolbar-label" for="projectFilter">Project</label>
                                    <select id="projectFilter" class="toolbar-select">
                                        <option value="">Select project...</option>
                                    </select>
                                </div>
                            </div>

                            <div class="toolbar-right">
                                <button type="button" class="btn-toolbar btn-toolbar-secondary" id="btnEditExpenses" disabled>
                                    Edit Expenses
                                </button>
                                <button type="button" class="btn-toolbar btn-toolbar-primary" id="btnAddExpense" disabled>
                                    Add Expense
                                </button>
                            </div>
                        </div>

                        <!-- Expenses Table -->
                        <div class="expenses-table-container">
                            <div id="expensesEmptyState" class="expenses-empty-state">
                                <span class="expenses-empty-icon">ðŸ“‹</span>
                                <span class="expenses-empty-text">Select a project to view expenses</span>
                            </div>

                            <table class="expenses-table" id="expensesTable" style="display: none;">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Type</th>
                                        <th>Vendor</th>
                                        <th>Payment</th>
                                        <th>Amount</th>
                                        <th>Description</th>
                                        <th class="col-actions"></th>
                                    </tr>
                                </thead>
                                <tbody id="expensesTableBody">
                                    <!-- Rendered by JS -->
                                </tbody>
                            </table>
                        </div>

                        <!-- Edit mode footer (hidden by default) -->
                        <div class="edit-mode-footer hidden" id="editModeFooter">
                            <button type="button" class="btn-edit-cancel" id="btnCancelEdit">Cancel</button>
                            <button type="button" class="btn-edit-save" id="btnSaveChanges">Save Changes</button>
                        </div>
                    </section>

                </div>
            </main>
        </div>
    </div>

    <!-- Add Expense Modal -->
    <div id="addExpenseModal" class="modal-backdrop hidden">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Add Expenses</div>
                <button type="button" class="modal-close-btn" id="btnCloseExpenseModal">&times;</button>
            </div>

            <div class="modal-body">
                <!-- Project indicator -->
                <div class="modal-project-info">
                    <span class="modal-project-label">Project:</span>
                    <span class="modal-project-name" id="modalProjectName">â€”</span>
                </div>

                <!-- Expense rows table -->
                <div class="modal-table-container">
                    <table class="expense-rows-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Type</th>
                                <th>Vendor</th>
                                <th>Payment</th>
                                <th>Amount</th>
                                <th>Description</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="expenseRowsBody">
                            <!-- Rows rendered by JS -->
                        </tbody>
                    </table>

                    <div class="add-row-container">
                        <button type="button" class="btn-add-row" id="btnAddExpenseRow">
                            <span>+</span> Add Row
                        </button>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn-modal-secondary" id="btnCancelExpenses">Cancel</button>
                <button type="button" class="btn-modal-primary" id="btnSaveAllExpenses">Save All</button>
            </div>
        </div>
    </div>

    <!-- Config and Expenses Logic -->
    <script src="assets/js/expenses.js"></script>

    <script>
        window.addEventListener("DOMContentLoaded", () => {
            if (window.initTopbarPills) window.initTopbarPills();
            if (window.initSidebar) window.initSidebar();
        });
    </script>

</body>
</html>
