<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#1a1a1a" />
    <title>NGM HUB — Allowance ADU Calculator</title>
    <link rel="icon" type="image/png" href="assets/img/greenblack_icon.png" />
    <link rel="manifest" href="manifest.json" />
    <link rel="apple-touch-icon" href="assets/img/greenblack_icon.png" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="assets/css/styles.css" />
    <link rel="stylesheet" href="assets/css/adu_calculator_styles.css" />
    <link rel="stylesheet" href="assets/css/toast.css" />
    <link rel="stylesheet" href="assets/css/arturito_widget.css" />

    <script src="assets/js/config.js"></script>
    <script src="assets/js/auth-guard.js"></script>
    <script src="assets/js/toast.js" defer></script>
    <script src="assets/js/permissions.js" defer></script>
    <script src="assets/js/pills.js" defer></script>
    <script src="assets/js/sidebar.js" defer></script>
    <script src="assets/js/adu_calculator.js" defer></script>
    <script src="assets/js/arturito_widget.js" defer></script>
</head>
<body class="page-allowance-adu page-loading">
    <!-- Page Loading Overlay -->
    <div class="page-loading-overlay" id="pageLoadingOverlay">
        <img src="assets/img/white_icon.png" class="loading-logo loading-logo-xl" alt="Loading...">
        <span class="loading-text">Loading...</span>
    </div>

    <div class="app-layout">
        <!-- Sidebar (content generated by sidebar.js) -->
        <aside class="sidebar" id="sidebar"></aside>

        <div class="main-area">
            <header class="ngm-topbar">
                <div class="ngm-bar-left">
                    <div class="ngm-brand">
                        <div class="ngm-brand-icon-small"><img src="assets/img/white_icon.png" alt="NGM"></div>
                        <div class="ngm-brand-text">
                            <span class="ngm-brand-org">Next Generation Management</span>
                            <span class="ngm-brand-context">NGM Hub · Allowance ADU Calculator</span>
                        </div>
                    </div>
                </div>
                <div class="ngm-topbar-right">
                    <div class="ngm-meta">
                        <span id="env-pill" class="ngm-meta-pill ngm-meta-env">Environment · —</span>
                        <span id="server-pill" class="ngm-meta-pill ngm-meta-status ngm-meta-status-live">Server · —</span>
                    </div>
                    <form class="ngm-search" role="search" onsubmit="return false;">
                        <span class="ngm-global-search-icon">&#x2315;</span>
                        <input type="search" id="globalSearch" class="ngm-search-input" placeholder="Search..." />
                    </form>
                    <span id="user-pill" class="user-pill">User · —</span>
                </div>
            </header>

            <main class="main-content">
                <div class="workspace">
                    <section class="data-section">
                        <!-- Toolbar -->
                        <div class="expenses-toolbar">
                            <div class="toolbar-left">
                                <h2 style="margin: 0; font-size: 16px; font-weight: 600; color: var(--text-primary);">Allowance ADU Calculator</h2>
                            </div>
                            <div class="toolbar-right">
                                <button type="button" class="btn-toolbar btn-toolbar-secondary" id="btnReset">Reset</button>
                            </div>
                        </div>

                        <!-- Calculator -->
                        <div class="adu-calc-container">

                            <!-- STEP 1: ADU Type -->
                            <div class="adu-param-section" id="sectionAduType">
                                <div class="adu-param-header">
                                    <span class="adu-param-step" id="stepAduType">1</span>
                                    <span class="adu-param-title">ADU Type</span>
                                </div>
                                <p class="adu-param-subtitle">Select the type of Accessory Dwelling Unit</p>
                                <div class="adu-options-grid" id="gridAduType">
                                    <div class="adu-option-card" data-type="attached">
                                        <span class="card-label">Attached</span>
                                        <span class="card-desc">Connected to main dwelling</span>
                                    </div>
                                    <div class="adu-option-card" data-type="detached">
                                        <span class="card-label">Detached</span>
                                        <span class="card-desc">Separate structure</span>
                                    </div>
                                    <div class="adu-option-card" data-type="above_garage">
                                        <span class="card-label">Above the Garage</span>
                                        <span class="card-desc">Built over existing garage</span>
                                    </div>
                                    <div class="adu-option-card" data-type="garage_conversion">
                                        <span class="card-label">Garage Conversion</span>
                                        <span class="card-desc">Convert existing garage</span>
                                    </div>
                                    <div class="adu-option-card" data-type="multifamily">
                                        <span class="card-label">Multifamily</span>
                                        <span class="card-desc">Multi-unit building</span>
                                    </div>
                                </div>
                            </div>

                            <div class="adu-section-divider"></div>

                            <!-- STEP 2: Stories -->
                            <div class="adu-param-section locked" id="sectionStories">
                                <div class="adu-param-header">
                                    <span class="adu-param-step" id="stepStories">2</span>
                                    <span class="adu-param-title">Number of Stories</span>
                                </div>
                                <p class="adu-param-subtitle">Available options depend on the ADU type selected</p>
                                <div class="adu-options-grid stories" id="gridStories">
                                    <div class="adu-option-card" data-stories="1">
                                        <span class="card-label">1 Story</span>
                                    </div>
                                    <div class="adu-option-card" data-stories="2">
                                        <span class="card-label">2 Story</span>
                                    </div>
                                    <div class="adu-option-card" data-stories="4">
                                        <span class="card-label">4 Story</span>
                                    </div>
                                    <div class="adu-option-card" data-stories="5">
                                        <span class="card-label">5 Story</span>
                                    </div>
                                </div>
                            </div>

                            <div class="adu-section-divider"></div>

                            <!-- STEP 3: Construction Type -->
                            <div class="adu-param-section locked" id="sectionConstruction">
                                <div class="adu-param-header">
                                    <span class="adu-param-step" id="stepConstruction">3</span>
                                    <span class="adu-param-title">Construction Type</span>
                                </div>
                                <p class="adu-param-subtitle">Select the construction method</p>
                                <div class="adu-options-grid" id="gridConstruction">
                                    <div class="adu-option-card" data-construction="stick_build">
                                        <span class="card-label">Stick Build</span>
                                        <span class="card-desc">Traditional construction</span>
                                    </div>
                                    <div class="adu-option-card" data-construction="energy_efficient">
                                        <span class="card-label">Energy Efficient</span>
                                        <span class="card-desc">High performance build</span>
                                    </div>
                                    <div class="adu-option-card" data-construction="renovation">
                                        <span class="card-label">Renovation</span>
                                        <span class="card-desc">Remodel existing structure</span>
                                    </div>
                                    <div class="adu-option-card" data-construction="manufactured">
                                        <span class="card-label">Manufactured</span>
                                        <span class="card-desc">Prefab / modular unit</span>
                                    </div>
                                </div>
                            </div>

                            <div class="adu-section-divider"></div>

                            <!-- STEP 4: Square Footage -->
                            <div class="adu-param-section locked" id="sectionSqft">
                                <div class="adu-param-header">
                                    <span class="adu-param-step" id="stepSqft">4</span>
                                    <span class="adu-param-title">Square Footage</span>
                                </div>
                                <p class="adu-param-subtitle">Total livable area of the ADU</p>
                                <div class="adu-input-row" style="margin-left: 40px;">
                                    <div class="adu-input-field">
                                        <input type="number" id="inputSqft" class="adu-text-input" placeholder="0" min="0" step="1" />
                                        <span class="adu-input-suffix">sq ft</span>
                                    </div>
                                </div>
                            </div>

                            <div class="adu-section-divider"></div>

                            <!-- STEP 5: Floor Plan Screenshot (Optional) -->
                            <div class="adu-param-section locked" id="sectionScreenshot">
                                <div class="adu-param-header">
                                    <span class="adu-param-step" id="stepScreenshot">5</span>
                                    <span class="adu-param-title">Floor Plan Screenshot <span class="adu-optional-badge">Optional</span></span>
                                </div>
                                <p class="adu-param-subtitle">Upload floor plan images for AI-powered feature analysis</p>

                                <div class="adu-screenshot-uploads" id="screenshotUploads" style="margin-left: 40px;">
                                    <!-- Upload zones rendered dynamically by JS -->
                                </div>

                                <div class="adu-analysis-results hidden" id="analysisResults" style="margin-left: 40px;">
                                    <!-- Populated by JS after GPT analysis -->
                                </div>

                                <div class="adu-screenshot-actions" style="margin-left: 40px; margin-top: 12px;">
                                    <button type="button" class="btn-toolbar btn-toolbar-secondary" id="btnSkipScreenshot">Skip - Calculate Without</button>
                                    <button type="button" class="btn-toolbar btn-toolbar-primary hidden" id="btnAnalyzeAll">Analyze Floor Plan(s)</button>
                                </div>
                            </div>

                            <div class="adu-section-divider"></div>

                            <!-- STEP 6: Cost Estimate Results -->
                            <div class="adu-param-section locked" id="sectionResults">
                                <div class="adu-param-header">
                                    <span class="adu-param-step" id="stepResults">6</span>
                                    <span class="adu-param-title">Cost Estimate</span>
                                </div>
                                <div class="adu-results-container" id="resultsContainer">
                                    <!-- Populated by JS after calculation -->
                                </div>
                            </div>

                            <div class="adu-section-divider"></div>

                            <!-- SELECTION SUMMARY -->
                            <div class="adu-summary-bar" id="summaryBar">
                                <span class="summary-label">Selection</span>
                                <div class="summary-tags" id="summaryTags">
                                    <span class="adu-summary-placeholder">Select ADU type to begin</span>
                                </div>
                            </div>

                        </div>
                    </section>
                </div>
            </main>
        </div>
    </div>

    <!-- Firebase Push Notifications -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-messaging-compat.js"></script>
    <script src="assets/js/firebase-init.js"></script>
</body>
</html>
